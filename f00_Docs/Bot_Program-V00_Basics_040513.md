
سر فصل های پروژه نوشتن ربات تریدر خودکار فارکس با نام Bot-RL-1
فصل 1: تنظیمات و معماری کلی پروژه
1.	مدیریت وابستگی‌ها و پکیج
o	requirements.txt  یا Pipfile
o	Pin  کردن نسخه‌ها برای تکرارپذیری
2.	ساختار فولدر پیشنهادی
Bot-RL-1/
├── f00_Docs/                 # فایل‌های markdown که شامل اسناد پروژه هستند
├── f01_config/               # فایل‌های تنظیمات (YAML/JSON)
├── f02_data/
│   ├── raw/                  # داده خام OHLCV, اخبار, فاندامنتال
│   ├── processed/            # خروجی پیش‌پردازش
│   └── fundamental/          # پارامترهای اقتصادی ذخیره‌شده
├── f03_env/                  # محیط RL سفارشی (TradingEnv)
├── f04_features/             # اسکریپت‌های استخراج اندیکاتورها و پرایس‌اکشن
├── f05_agents/               # کد عامل RL (PPO, SAC, DQN, …)
├── f06_replay_buffer/        # ساختار حافظه تجربی (با قابلیت Prioritized)
├── f07_training/             # لوپ‌های آموزش، ذخیره چک‌پوینت
├── f08_evaluation/           # بک‌تست و تحلیل معیارها
├── f09_execution/            # اجرای معاملات زنده و اعتبارسنجی
├── f10_utils/                # توابع کمکی (logging, risk, dateutils)
├── f11_tests/                # تست‌های واحد  
├── f12_notebooks/            # آنالیز داده و مصورسازی  
├── f13_optimization/         # ماژول خودبهینه‌سازی روزانه
├── f14_models/               # ذخیره مدل‌های آموزش‌دیده
├── main.py               # اسکریپت نقطهٔ ورود  
└── requirements.txt
________________________________________
فصل 2: تعریف مسئله و اهداف ربات
1.	هدف‌های اصلی
o	ماکزیمم کردن سود خالص (PnL)
o	بهبود نسبت سود به ریسک (Sharpe Ratio)
o	کنترل و کمینه‌سازی افت سرمایه (Drawdown)
2.	قابلیت‌های کلیدی
o	ترید 24×7 در بازار فارکس
o	اتصال خودکار و launch نرم‌افزار MetaTrader 5
o	ارسال، پیگیری و کنترل موفقیت سفارشات
o	پشتیبانی از چند نماد (XAU/USD + جفت‌ارزهای پیشنهادی برای تنوع)
o	بستن خودکار معاملات در انتهای روز (اختیاری)
o	پرایس اکشن و تحلیل فاندامنتال ترکیبی
o	خودبهینه‌سازی پارامترها پس از پایان هر روز
________________________________________
فصل 3: لایه داده (Data Layer)
1.	دریافت و ذخیره‌سازی داده‌ها
o	MetaTrader5 API (یا MT5 library)
o	APIهای خبری (Forex Factory و ...)
2.	داده‌های تاریخی
o	OHLCV در تایم‌فریم‌های: 1m, 5m, 30m, 4h, 1d, 1w
o	چند جفت ارز اصلی XAU/USD + (پیشنهادات پوشش ریسک)
3.	داده‌های فاندامنتال
o	GDP, CPI, NFP, نرخ بهره و ...
o	دانلود و ذخیره خودکار در data/fundamental/
4.	پیش‌پردازش
o	حفظ ترتیب زمانی
o	نرمال‌سازی/Scaling
o	محاسبه اندیکاتورها (EMA, RSI, ATR, MACD, …)
o	استخراج الگوهای کندلی و پرایس اکشن از 10–15 کندل اخیر
________________________________________
فصل 4: طراحی محیط یادگیری تقویتی (TradingEnv)
1.	ایمپلیمنت بر پایه Gymnasium
o	توابع: __init__(), reset(), step(action), render(), close()
2.	فضای حالت (State)
o	بردار ترکیبی: قیمت‌ها (OHLCV)، اندیکاتورها، اطلاعات حساب (balance, equity, margin, free_margin)، اخبار/احساسات
3.	فضای عمل (Action Space)
o	Buy, Sell, Hold
o	تعیین حجم (مضربی از 0.01 لات)
o	تنظیم SL/TP/Trailing Stop
4.	شبیه‌سازی هزینه‌ها و شرایط بازار
o	اسپرد، کمیسیون، اسلیپیج
o	چک موفقیت اجرای سفارش
________________________________________
فصل 5: عامل یادگیرنده (RL Agent)
1.	انتخاب الگوریتم
o	فضای پیوسته: PPO یا SAC
o	فضای گسسته: DQN، Double DQN
o	دیگر گزینه‌ها: TD3, A2C, TRPO
2.	ساختار شبکه عصبی
o	MLP  یا ترکیب (CNN در صورت استفاده از ورودی تصویری)
3.	حافظه تجربی
o	Prioritized Experience Replay
4.	استراتژی اکتشاف
o	ε-greedy, OU Noise, Entropy Regularization
________________________________________
فصل 6: تعریف تابع پاداش (Reward Function)
•	ترکیبی از:
reward = α * normalized_PnL + β * Sharpe_ratio - γ * Drawdown_penalty
•	معیارهای کمکی: Win/Loss Ratio، Maximum Drawdown
________________________________________
فصل 7: حلقه آموزش (Training Loop)
1.	پارامترهای کلیدی
o	batch_size, learning_rate, γ (discount factor)
o	تعداد epochs/steps، target network update
2.	متدهای کنترل
o	Early Stopping، Resume Training
o	چک‌پوینت‌گذاری منظم
3.	لاگینگ و مانیتورینگ
o	TensorBoard یا wandb
o	ذخیره CSV دوره‌ای
________________________________________
فصل 8: ارزیابی و بک‌تست
1.	معیارهای ارزیابی
o	CAGR، Sharpe Ratio، Max Drawdown
o	Win/Loss Ratio
2.	ابزارها
o	backtrader، QuantStats، Pyfolio
3.	خروجی‌های تصویری
o	نمودار Equity Curve
o	نمودار Drawdown
________________________________________
فصل 9: اجرای معاملات زنده (Live Trading)
1.	راه‌اندازی متاتریدر
o	چک و لاندچ MT5 در ابتدای اجرا
o	اتصال با MetaTrader5 API
2.	ارسال و مدیریت سفارشات
o	کنترل حجم، SL/TP
o	اعتبارسنجی باز شدن پوزیشن
3.	مدیریت زمان‌بندی
o	عدم ترید هنگام اخبار مهم
o	(اختیاری) بستن معاملات در پایان روز
________________________________________
فصل 10: مدیریت ریسک (Risk Management)
•	تنظیم حجم برخلاف درصد ریسک کاربر
•	حداقل حجم: 0.01 لات و مضارب آن
•	کنترل حداکثر ضرر روزانه
•	مانیتور real-time margin call
________________________________________
فصل 11: خودبهینه‌سازی و به‌روزرسانی
1.	پس از بسته شدن بازار روزانه
o	آپدیت داده‌های فاندامنتال
o	ارزیابی عملکرد روزانه
o	Fine-tuning مدل با دادهٔ جدید
________________________________________
فصل 12: تست و زیرساخت توسعه
1.	تست واحد (Unit Tests) در tests/
2.	CI/CD با GitHub Actions (lint, تست، build)
3.	Hyperparameter Tuning با Optuna یا Ray Tune
4.	موازی‌سازی یا GPU برای تسریع آموزش
5.	اعلان خطا (تلگرام/ایمیل)

